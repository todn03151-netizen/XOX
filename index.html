<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XOX FINAL</title>

<style>
body{
 margin:0;height:100vh;
 display:flex;justify-content:center;align-items:center;
 background:radial-gradient(circle,#001,#000);
 font-family:Arial;color:#0ff;
}
.hidden{display:none}
.box{
 width:360px;padding:22px;border-radius:18px;
 background:#000c;text-align:center;
 box-shadow:0 0 25px #0ff6;
}
input,select,button{
 width:100%;padding:12px;margin:8px 0;
 border-radius:10px;border:none;font-size:15px;
}
input,select{background:#0ff2;color:#0ff}
button{background:#0ff;color:#003;font-weight:bold;cursor:pointer}
.board{
 display:grid;grid-template-columns:repeat(3,1fr);
 gap:10px;margin:15px 0;
}
.cell{
 height:85px;font-size:38px;
 background:#0ff2;color:#0ff;
 border:none;border-radius:12px;
 cursor:pointer;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="box" id="loginBox">
 <h2>LOGIN</h2>
 <input id="user" placeholder="Username">
 <input id="pass" type="password" placeholder="Password">
 <button onclick="login()">LOGIN</button>
</div>

<!-- MENU -->
<div class="box hidden" id="menuBox">
 <h2>MENU</h2>
 <select id="modeSelect">
  <option value="bot">Player vs Bot</option>
  <option value="pvp">Player vs Player</option>
 </select>
 <select id="levelSelect">
  <option value="1">Level 1</option>
  <option value="2">Level 2</option>
  <option value="3">Level 3</option>
  <option value="4">Level 4 </option>
 </select>
 <button onclick="startGame()">START GAME</button>
</div>

<!-- GAME -->
<div class="box hidden" id="gameBox">
 <h2>X O X</h2>
 <div id="info">Giliran: X</div>
 <div class="board" id="board"></div>
 <div>
  Menang: <span id="w">0</span> |
  Kalah: <span id="l">0</span> |
  Seri: <span id="d">0</span>
 </div>
 <button onclick="home()">HOME</button>
</div>

<script>
/* ===== ELEMENT ===== */
const loginBox=document.getElementById("loginBox");
const menuBox=document.getElementById("menuBox");
const gameBox=document.getElementById("gameBox");
const boardEl=document.getElementById("board");
const info=document.getElementById("info");
const modeSelect=document.getElementById("modeSelect");
const levelSelect=document.getElementById("levelSelect");

/* ===== DATA ===== */
let board,turn,mode,botLevel;
let score={w:0,l:0,d:0};
const winLine=[
 [0,1,2],[3,4,5],[6,7,8],
 [0,3,6],[1,4,7],[2,5,8],
 [0,4,8],[2,4,6]
];

/* ===== LOGIN ===== */
function login(){
 if(user.value==="bandit" && pass.value==="123"){
  loginBox.classList.add("hidden");
  menuBox.classList.remove("hidden");
 }else alert("Login salah");
}

/* ===== MENU ===== */
function startGame(){
 mode=modeSelect.value;
 botLevel=parseInt(levelSelect.value);
 menuBox.classList.add("hidden");
 gameBox.classList.remove("hidden");
 reset();
}
function home(){
 gameBox.classList.add("hidden");
 menuBox.classList.remove("hidden");
}

/* ===== GAME ===== */
function reset(){
 board=["","","","","","","","",""];
 turn="X";
 render();
 info.innerText="Giliran: X";
}

function render(){
 boardEl.innerHTML="";
 board.forEach((v,i)=>{
  let b=document.createElement("button");
  b.className="cell";
  b.innerText=v;
  b.onclick=()=>play(i);
  boardEl.appendChild(b);
 });
}

function play(i){
 if(board[i])return;
 if(mode==="bot" && turn==="O")return;

 board[i]=turn;
 render();

 if(check(turn)) return end(turn);
 if(full()) return draw();

 turn=turn==="X"?"O":"X";
 info.innerText="Giliran: "+turn;

 if(mode==="bot" && turn==="O") setTimeout(botMove,200);
}

/* ===== BOT ===== */
function botMove(){
 let move = unbeatableMove();
 board[move]="O";
 render();

 if(check("O")) return end("O");
 if(full()) return draw();

 turn="X";
 info.innerText="Giliran: X";
}

function unbeatableMove(){
 let w=findWin("O"); if(w!=null) return w;
 let b=findWin("X"); if(b!=null) return b;
 if(board[4]==="") return 4;
 return board.findIndex(v=>v==="");
}

/* ===== RESULT ===== */
function findWin(p){
 for(let w of winLine){
  let m=w.filter(i=>board[i]===p).length;
  let e=w.find(i=>board[i]==="");
  if(m===2 && e!=null) return e;
 }
 return null;
}
function check(p){return winLine.some(w=>w.every(i=>board[i]===p));}
function full(){return board.every(v=>v);}
function end(p){
 if(p==="X") score.w++; else score.l++;
 update(); setTimeout(reset,400);
}
function draw(){
 score.d++; update(); setTimeout(reset,400);
}
function update(){
 w.innerText=score.w;
 l.innerText=score.l;
 d.innerText=score.d;
}
</script>

</body>
</html>